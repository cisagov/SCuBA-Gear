# Author: James Garriss
# Purpose: Run the product functional tests every night

name: Nightly Product Functional Tests

# Run this workflow at midnight 
# on every Mon to Fri (b/c GMT -5)
on:
  schedule:
  - cron: '0 4 * * 1-5'
  workflow_dispatch: 
  push:
    branches:
    - '652-add-nightly-product-functional-testing'

jobs:
  sharepoint-test:
    name: SharePoint Test
    runs-on: windows-latest
    # env:
      # This is the key necessary to auth to the products for testing
      # TODO put REAL name of secret here
      # SCUBA_GITHUB_AUTOMATION_CREDS: ${{ secrets.SCUBA_GITHUB_AUTOMATION_CREDS }}
    defaults:
      run:
        shell: powershell 
    steps:
    # - name: Checkout Repo
    #   uses: actions/checkout@v4
    # - name: Run Setup
    #   run: "./SetUp.ps1"
    # - name: Install Selenium
    #   run: "Install-Module -Name Selenium -RequiredVersion 3.0.1"
    # - name: Update Selenium
    #   run: "./Testing/Functional/SmokeTest/UpdateSelenium.ps1"
    - name: Look for cert dir
      run: ls -al /etc/ssl/certs
    # - name: Check for cert file
    #   run: cat /etc/ssl/certs/ca-certificates.crt
    # This test won't run until certs are figured out.
    # - name: Test SharePoint
    #   run: "./Testing/Functional/Products/Tests/sharepoint-commercial.ps1 FD6219CFBF937830616E43DF9C81BCF7D22FE03F"
